/*
Each function tests an IC based on the its datasheet and truth table.
*/
unsigned char d;
void Apply_supply_7_14();
void Apply_supply_10_5();
void Apply_supply_8_16();
void Disable_supply();
void SendChar(unsigned char ch);

void t_delay(int t)
{
   int n;
   for(n=0; n<t; n++)  /* just loop */  ;
}
void portInitialization14()
{
	P0 = 0xFF;    P2 = 0xFF;  P8_14 = 1;  P9_14 = 1 ;
}

void portInitialization16()
{
	P0 = 0xFF;    P2 = 0xFF;  P11_16 = 1; 
}
void portInitialization10()
{
	P0 = 0xFF;    P2 = 0xFF; P8_14 = 1;  P9_14 = 1;  P11_14 = 1;  P12_14 = 1;
}
void Apply_supply_7_14()
{
    P1 =  0x1E; //Apply Vcc and Gnd 00011110
    latch = 0;
	  latch = 1; 
  	latch = 0;
}

void Apply_supply_8_16()
{
    P1 =  0x1D; //Apply Vcc and Gnd 00011101
    latch = 0;
	  latch = 1; 
  	latch = 0;
}


void Apply_supply_10_5()
{
    P1 =  0x2B; //Apply Vcc and Gnd 00101011
    latch = 0;
	  latch = 1; 
  	latch = 0;
}


void Disable_supply()
{
    P1 =  0x0F; //Apply Vcc and Gnd 00001111
    latch = 0;
	  latch = 1; 
  	latch = 0;

}

unsigned int test_74293()
{
//PIN[10,11,12,13] : INPUT;
//PIN[4,5,8,9] : OUTPUT;
//PIN[7] : GND;
//PIN[14] : +5V;
	
P10_14 = 1;P11_14 = 1;
P12_14 = 1;P13_14 = 1;   //setting input 1
		
P12_14 = 0;P13_14 = 0;  
if (P4_14 != 0 || P5_14 != 0 || P8_14 != 0 || P9_14 != 0 ) 
    return (0) ;	
P11_14 = P9_14;
P10_14 = 0;
P10_14 = 1; 
if (P9_14 == 0) 
	return (0) ;

P11_14 = P9_14;
P10_14 = 0;
P10_14 = 1; 
if (P9_14 == 1 ||P5_14 == 0) 
	return (0) ;

P11_14 = P9_14;
P10_14 = 0;
P10_14 = 1; 
if (P9_14 == 1 ||P5_14 == 1) 
	return (1) ;



return(0);
}

unsigned int test_7427()
{
//PIN[1,2,3,4,5,9,10,11,13] : INPUT;
//PIN[6,8,12] : OUTPUT;
//PIN[7] : GND;
//PIN[14] : +5V;
P1_14 = 1; P9_14 = 1;
P2_14 = 1; P10_14 = 1;
P3_14 = 1; P11_14 = 1;
P4_14 = 1; P13_14 = 1; 
P5_14 = 1;
    	
//0-0-0	
P1_14 = 0; P9_14 = 0;
P2_14 = 0; P10_14 = 0;
P3_14 = 0; P11_14 = 0;
P4_14 = 0; P13_14 = 0; 
P5_14 = 0;
if(P12_14 != ~(P1_14 | P2_14 |P13_14) || P8_14 != ~(P9_14 | P10_14 |P11_14) ||  P6_14 != ~(P3_14 | P4_14 |P5_14) )
     return(0);

//0-0-1
P1_14 = 0; P9_14 =  1;
P2_14 = 0; P10_14 = 0;
P3_14 = 0; P11_14 = 0;
P4_14 = 0; P13_14 = 1; 
P5_14 = 1;       
if(P12_14 != ~(P1_14 | P2_14 |P13_14) || P8_14 != ~(P9_14 | P10_14 |P11_14) ||  P6_14 != ~(P3_14 | P4_14 |P5_14) )
     return(0);
//0-1-0
P1_14 = 0; P9_14 =  0;
P2_14 = 1; P10_14 = 1;
P3_14 = 0; P11_14 = 0;
P4_14 = 1; P13_14 = 0; 
P5_14 = 0;   
if(P12_14 != ~(P1_14 | P2_14 |P13_14) || P8_14 != ~(P9_14 | P10_14 |P11_14) ||  P6_14 != ~(P3_14 | P4_14 |P5_14) )
     return(0);

//0-1-1
P1_14 = 0; P9_14  = 1;
P2_14 = 1; P10_14 = 1;
P3_14 = 0; P11_14 = 0;
P4_14 = 1; P13_14 = 1; 
P5_14 = 1;
if(P12_14 != ~(P1_14 | P2_14 |P13_14) || P8_14 != ~(P9_14 | P10_14 |P11_14) ||  P6_14 != ~(P3_14 | P4_14 |P5_14) )
     return(0);
//1-0-0
P1_14 = 1; P9_14  = 0;
P2_14 = 0; P10_14 = 0;
P3_14 = 1; P11_14 = 1;
P4_14 = 0; P13_14 = 0; 
P5_14 = 0;
if(P12_14 != ~(P1_14 | P2_14 |P13_14) || P8_14 != ~(P9_14 | P10_14 |P11_14) ||  P6_14 != ~(P3_14 | P4_14 |P5_14) )
     return(0);
//1-0-1
P1_14 = 1; P9_14  = 1;
P2_14 = 0; P10_14 = 0;
P3_14 = 1; P11_14 = 1;
P4_14 = 0; P13_14 = 1; 
P5_14 = 1;
if(P12_14 != ~(P1_14 | P2_14 |P13_14) || P8_14 != ~(P9_14 | P10_14 |P11_14) ||  P6_14 != ~(P3_14 | P4_14 |P5_14) )
     return(0);
//1-1-0
P1_14 = 1; P9_14  = 0;
P2_14 = 1; P10_14 = 1;
P3_14 = 1; P11_14 = 1;
P4_14 = 1; P13_14 = 0; 
P5_14 = 0;
if(P12_14 != ~(P1_14 | P2_14 |P13_14) || P8_14 != ~(P9_14 | P10_14 |P11_14) ||  P6_14 != ~(P3_14 | P4_14 |P5_14) )
     return(0);
//1-1-1
P1_14 = 1; P9_14  = 1;
P2_14 = 1; P10_14 = 1;
P3_14 = 1; P11_14 = 1;
P4_14 = 1; P13_14 = 1; 
P5_14 = 1;
if(P12_14 != ~(P1_14 | P2_14 |P13_14) || P8_14 != ~(P9_14 | P10_14 |P11_14) ||  P6_14 != ~(P3_14 | P4_14 |P5_14) )
     return(0);


return(1);
}
void SetupSerial()
{
		SCON  = 0x50;		       			 /* SCON: mode 1, 8-bit UART, enable rcvr      */
    TMOD |= 0x20;               /* TMOD: timer 1, mode 2, 8-bit reload        */
    TH1   = 253;                /* TH1:  reload value for 9600 baud @ 11.0592MHz   */
    TR1   = 1;                  /* TR1:  timer 1 run                          */
    TI    = 1;                  /* TI:   set TI to send first char of UART    */

}


void SendChar(unsigned char ch)
{
    SBUF = ch;
		while(TI==0);
		TI = 0;
}


void PrintString(const char* s)
{
  while(*s)
  SendChar(*(s++));
}

unsigned int test_4014()
{
//PIN[1,4,5,6,7,13,14,15,9,11,10] : INPUT
//PIN[2,3,12] : OUTPUT
//PIN[8] : GND
//PIN[16] : +5V
	
P1_16 = 1;P15_16 = 1;
P4_16 = 1;P14_16 = 1;
	        P13_16 = 1;
P5_16 = 1;P11_16 = 1;
P6_16 = 1;P10_16 = 1;
P7_16 = 1; P9_16 = 1;	
d= 0x00;
P10_16 = 0;
P1_16 = 1;P15_16 = 0;P14_16 = 1;P13_16 = 0;P4_16 = 1;P5_16 = 0;P6_16 = 1;P7_16 = 0;	
P9_16 = 0;

P11_16 = 0;
P10_16 = 0;  
                  

P9_16 = 0;	//selector is LOW, serial input

P11_16 = 0;

P10_16 = 1;
P10_16 = 0;

P10_16 = 1;
P10_16 = 0;

P10_16 = 1;
P10_16 = 0;

P10_16 = 1;
P10_16 = 0;

P10_16 = 1;
P10_16 = 0;

P10_16 = 1;
P10_16 = 0;

if(P2_16 != 0)
	return(0);

P11_16 = 1;

P10_16 = 1;
P10_16 = 0;

P10_16 = 1;
P10_16 = 0;

P10_16 = 1;
P10_16 = 0;

P10_16 = 1;
P10_16 = 0;

P10_16 = 1;
P10_16 = 0;

P10_16 = 1;
P10_16 = 0;

if(P2_16 != 1)
	return(0);

return(1);

}
unsigned int test_4018()
{
//PIN[1,2,3,7,15,14,12,10,9] : INPUT
//PIN[4,5,6,13,11] : OUTPUT
//PIN[8] : GND
//PIN[16] : +5V
	
	

P1_16 = 1;P2_16 = 1;
P3_16 = 1;P7_16 = 1;
P15_16 = 1;
P14_16 = 1;P12_16 = 1;
P9_16 = 1;P10_16 = 1;
P16_16 = 1;P8_16=1;
	
	
P1_16 = 0;P2_16 = 0;
P3_16 = 0;P7_16 = 0;
P15_16 = 0;
P14_16 = 0;P12_16 = 0;
P9_16 = 0;P10_16 = 0;
P16_16 = 1;P8_16=0;
	
P15_16 = 1;
P14_16 =1;P14_16 =0;
P1_16=P13_16;

if((P5_16 & P4_16 & P6_16 & P11_16 & P13_16) != 1 )
	return(0);

 P15_16 = 0;
P1_16=P13_16;
P14_16 =1;P14_16 =0;
t_delay(500);
P1_16=P13_16;
P14_16 =1;P14_16 =0;
t_delay(500);
P1_16=P13_16;
P14_16 =1;P14_16 =0;
t_delay(500);
P1_16=P13_16;
if(P5_16  == 1)
	return(0);
  
return(1);
}   

unsigned int test_7490()
{
//PIN[14,1,2,3,6,7] : INPUT;
//PIN[12,9,8,11] : OUTPUT;
//PIN[2,3,6,7,10] : GND;
//PIN[5] : +5V;
P14_14 = 1;P1_14 = 1;P2_14 = 1;
P3_14 = 1;P6_14 = 1;P7_14=1;
P2_14 = 1;P3_14 = 1;P7_14 = 1;P10_14=1;

P14_14 = 0;P1_14 = 0;P2_14 = 0;
P3_14 = 0;P6_14 = 0;P7_14=0;
P2_14 = 0;P3_14 = 0;P6_14=0;P7_14 = 0;P10_14=0;
	
	P6_14 = 1;P7_14 = 1;
	
	P14_14 = 1;P14_14 = 0;
	
	P1_14 = 1;P1_14 = 0;
	
	
	
if((P11_14 != 1 )||(P12_14 != 1 )||(P8_14 != 0 )||(P9_14 != 0 ))
	return(0);

P3_14=0;P7_14=0;

	P14_14 = 1;P14_14 = 0;
	
	P1_14 = 1;P1_14 = 0;
if((P11_14 == 0 )&&(P12_14 == 0 )&&(P8_14 == 0 )&&(P9_14 == 0 ))
	return(1);


}

unsigned int test_74157()
{
				
//PIN[1,2,3,5,6,10,11,13,14,15] : INPUT;
//PIN[4,7,9,12] : OUTPUT;
//PIN[8] : GND;
//PIN[16] : +5V;
P9_16 = 1; 
P1_16 = 1;P15_16 = 1;	
P2_16 = 1;P14_16 = 1;
P3_16 = 1; P13_16 = 1;
P5_16 = 1; P11_16 = 1; 
P6_16 = 1; P10_16 = 1;  
   	
 
P1_16 = 0; P15_16 =  1;	
P2_16 = 0; P14_16 =  0;
P3_16 = 0; P13_16 = 0;
P5_16 = 0; P11_16 = 0; 
P6_16 = 0; P10_16 = 0;  
   	
//d=0101 and p15 is 0
P14_16 =  0; P11_16 = 1; P5_16 = 0;P2_16 = 1;
P15_16 =0;	P1_16 = 0;//selector
if( P12_16 !=0 && P9_16 != 1 && P7_16 != 0 && P4_16 != 1)
return(0);

//d=0101 and p15 is 1			 
P14_16 =  0; P11_16 = 1; P5_16 = 0;P2_16 = 1;
P15_16 =1; P1_16 = 0;//selector
if( P12_16 !=0 && P9_16 != 0 && P7_16 != 0 && P4_16 != 0)
return(0);

//d=1010 and p15 is 1		 	 
P14_16 =  1; P11_16 = 0; P5_16 = 1;P2_16 = 0;
P15_16 =1;	P1_16 = 0;//selector
if( P12_16 !=1 && P9_16 != 0 && P7_16 != 1 && P4_16 != 0)
return(0);

//d=1010 and p15 is 0	 	 
P15_16 =0;	P1_16 = 0;//selector
P14_16 =  1; P11_16 = 0; P5_16 = 1;P2_16 = 0;
if( P12_16 !=0 && P9_16 != 0 && P7_16 != 0 && P4_16 != 0)
return(0);
		
//d=0101 and p15 is 0
P13_16 =  0; P10_16 = 1; P6_16 = 0;P3_16 = 1;
P15_16 =0;	P1_16 = 1;//selector
if( P12_16 !=0 && P9_16 != 1 && P7_16 != 0 && P4_16 != 1)
return(0);	

//d=0101 and p15 is 1
P13_16 =  0; P10_16 = 1; P6_16 = 0;P3_16 = 1;
P15_16 =1;	P1_16 = 1;//selector
if( P12_16 !=0 && P9_16 != 0 && P7_16 != 0&& P4_16 != 0)
return(0);		

//d=1010 and p15 is 1
P13_16 =  1; P10_16 = 0; P6_16 = 1;P3_16 = 0;
P15_16 =0;	P1_16 = 1;//selector
if( P12_16 !=1 && P9_16 != 0 && P7_16 != 1 &&P4_16 != 0)
return(0);		

//d=0101 and p15 is 1
P13_16 =  1; P10_16 = 0; P6_16 = 1;P3_16 = 0;
P15_16 =1;	P1_16 = 1;//selector
if( P12_16 !=0 && P9_16 != 0 && P7_16 != 0  &&P4_16 != 0)
return(0);		

return(1);
}




